"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{var e;const s=exports.urlPrefix,n=document.querySelector("#employee--message"),t=document.querySelector("#employee--employeeNumber");function a(e){"Enter"===e.key?o():"Shift"!==e.key&&"Tab"!==e.key&&(n.innerHTML="")}t.addEventListener("keyup",a);const i=document.querySelector("#employee--homeContact_lastFourDigits");function o(){return n.innerHTML='<p class="has-text-centered">\n      <i class="fas fa-4x fa-cog fa-spin" aria-hidden="true"></i><br />\n      <em>Loading employee...</em>\n      </p>',t.checkValidity()?i.checkValidity()?void cityssm.postJSON(s+"/doValidateEmployee",{employeeNumber:t.value,employeeHomeContactLastFourDigits:i.value},e=>{var s,t,a,i;const o=e;o.success?(n.innerHTML="",null===(s=document.querySelector("#tab--employee"))||void 0===s||s.classList.add("is-hidden"),document.querySelector("#employeeOptions--employeeName").textContent=null!==(t=o.employeeName)&&void 0!==t?t:"",null===(a=document.querySelector("#tab--employeeOptions"))||void 0===a||a.classList.remove("is-hidden")):n.innerHTML=`<div class="message is-danger">\n            <p class="message-body">\n            <strong>${null!==(i=o.errorMessage)&&void 0!==i?i:""}</strong><br />\n            If errors persist, please contact a manager for assistance.</p>\n            </div>`}):(n.innerHTML='<div class="message is-danger">\n        <p class="message-body">\n        Please enter a valid <strong>Last Four Digits</strong>.\n        </p>\n        </div>',void i.focus()):(n.innerHTML='<div class="message is-danger">\n        <p class="message-body">\n        Please enter a valid <strong>Employee Number</strong>.\n        </p>\n        </div>',void t.focus())}function l(e){var s;void 0!==e&&e.preventDefault();const a=document.querySelectorAll(".panel-tab");for(const e of a)e.classList.add("is-hidden");t.value="",i.value="",n.innerHTML="",null===(s=document.querySelector("#tab--employee"))||void 0===s||s.classList.remove("is-hidden")}i.addEventListener("keyup",a),null===(e=document.querySelector("#employee--nextButton"))||void 0===e||e.addEventListener("click",o);const d=document.querySelectorAll(".is-sign-out-button");for(const e of d)e.addEventListener("click",l);function r(e){var n,a;e.preventDefault();const o=e.currentTarget.hash;switch(null===(n=document.querySelector("#tab--employeeOptions"))||void 0===n||n.classList.add("is-hidden"),o){case"#tab--employeeOptions_callOutListAdd":!function(){const e=document.querySelector("#container--callOutListAdd");e.innerHTML='<p class="has-text-centered">\n      <i class="fas fa-4x fa-cog fa-spin" aria-hidden="true"></i><br />\n      <em>Loading call out lists...</em>\n      </p>',cityssm.postJSON(s+"/doGetAvailableCallOutLists",{employeeNumber:t.value,employeeHomeContactLastFourDigits:i.value},s=>{var n,t,a;const i=s;if(0===i.callOutLists.length)return void(e.innerHTML='<div class="message is-info">\n          <p class="message-body">\n            There are no call out lists that you are eligible to sign up for.\n          </p>\n          </div>');const o=document.createElement("div");o.className="panel";for(const e of i.callOutLists){const s=document.createElement("div");s.className="panel-block is-justify-content-space-between",s.dataset.listId=e.listId,s.innerHTML=`<div>\n            <strong>${e.listName}</strong><br />\n            ${null!==(n=e.listDescription)&&void 0!==n?n:""}\n            </div>\n            <div class="is-add-button-container"></div>`,null===(t=e.hasSelfSignUpKey)||void 0===t||t?s.querySelector(".is-add-button-container").innerHTML=`<div class="field has-addons">\n                <div class="control has-icons-left">\n                  <input class="input"\n                    id="callOutListAdd--selfSignUpKey_${e.listId}"\n                    name="selfSignUpKey_${e.listId}"\n                    type="text"\n                    placeholder="Sign Up Key"\n                    maxlength="10"\n                    aria-label="Sign Up Key"\n                    required />\n                  <span class="icon is-small is-left">\n                    <i class="fas fa-key" aria-hidden="true"></i>\n                  </span>\n                </div>\n                <div class="control">\n                  <button class="button is-success is-add-button" type="button">\n                    <span class="icon"><i class="fas fa-plus" aria-hidden="true"></i></span>\n                    <span>Add to List</span>\n                  </button>\n                </div>\n              </div>`:s.querySelector(".is-add-button-container").innerHTML='<button class="button is-success is-add-button" type="button">\n                <span class="icon"><i class="fas fa-plus" aria-hidden="true"></i></span>\n                <span>Add to List</span>\n              </button>',null===(a=s.querySelector(".is-add-button"))||void 0===a||a.addEventListener("click",u),o.append(s)}e.innerHTML="",e.append(o)})}()}null===(a=document.querySelector(o))||void 0===a||a.classList.remove("is-hidden")}const c=document.querySelectorAll("#tab--employeeOptions a.panel-block");for(const e of c)e.addEventListener("click",r);function u(e){var n;e.preventDefault();const a=e.currentTarget;a.disabled=!0,a.classList.add("is-loading");const o=a.closest(".panel-block"),l=null!==(n=o.dataset.listId)&&void 0!==n?n:"";let d="";const r=o.querySelector("#callOutListAdd--selfSignUpKey_"+l);if(null!==r&&""===(d=r.value))return r.focus(),a.disabled=!1,void a.classList.remove("is-loading");cityssm.postJSON(s+"/doAddEmployeeToCallOutList",{employeeNumber:t.value,employeeHomeContactLastFourDigits:i.value,listId:l,selfSignUpKey:d},e=>{var s;const n=e;n.success?o.querySelector(".is-add-button-container").innerHTML='<i class="fas fa-check" aria-hidden="true"></i> Added to List':(bulmaJS.alert({title:"Error Adding Employee to List",message:null!==(s=n.errorMessage)&&void 0!==s?s:"Unknown error.  Please try again",contextualColorName:"danger"}),a.disabled=!1,a.classList.remove("is-loading"))})}})();