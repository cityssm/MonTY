"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=exports.MonTY;let t=exports.employees;delete exports.employees;let o=t;function l(o){o.preventDefault(),function(o){const l=t.find(e=>e.employeeNumber===o);function n(o){o.preventDefault(),cityssm.postJSON(e.urlPrefix+"/admin/doUpdateEmployee",o.currentTarget,e=>{const o=e;o.success&&(bulmaJS.alert({message:"Employee updated successfully.",contextualColorName:"success"}),t=o.employees,d())})}cityssm.openHtmlModal("employeeAdmin-employee",{onshow(e){var t,o,n,r,i,a,s;e.querySelector(".modal-card-title").textContent=l.employeeSurname+", "+l.employeeGivenName,e.querySelector("#employeeEdit--employeeNumber").value=l.employeeNumber,e.querySelector("#employeeEdit--employeeNumberSpan").textContent=l.employeeNumber,e.querySelector("#employeeEdit--isActive").value=l.isActive?"1":"0",e.querySelector("#employeeEdit--isSynced").value=l.isSynced?"1":"0",e.querySelector("#employeeEdit--employeeSurname").value=l.employeeSurname,e.querySelector("#employeeEdit--employeeGivenName").value=l.employeeGivenName,e.querySelector("#employeeEdit--jobTitle").value=null!==(t=l.jobTitle)&&void 0!==t?t:"",e.querySelector("#employeeEdit--department").value=null!==(o=l.department)&&void 0!==o?o:"",""!==(null!==(n=l.seniorityDateTime)&&void 0!==n?n:"")&&(e.querySelector("#employeeEdit--seniorityDateTime").valueAsDate=new Date(l.seniorityDateTime)),e.querySelector("#employeeEdit--syncContacts").value=l.syncContacts?"1":"0",e.querySelector("#employeeEdit--workContact1").value=null!==(r=l.workContact1)&&void 0!==r?r:"",e.querySelector("#employeeEdit--workContact2").value=null!==(i=l.workContact2)&&void 0!==i?i:"",e.querySelector("#employeeEdit--homeContact1").value=null!==(a=l.homeContact1)&&void 0!==a?a:"",e.querySelector("#employeeEdit--homeContact2").value=null!==(s=l.homeContact2)&&void 0!==s?s:""},onshown(t,o){var l;bulmaJS.toggleHtmlClipped(),e.initializeMenuTabs(t.querySelectorAll(".menu a"),t.querySelectorAll(".tabs-container > article")),null===(l=t.querySelector("#form--employeeEdit"))||void 0===l||l.addEventListener("submit",n)},onremoved(){bulmaJS.toggleHtmlClipped()}})}(o.currentTarget.dataset.employeeNumber)}const n=document.querySelector("#employeeSearch--employeeNameNumber"),r=document.querySelector("#employeeSearch--isActive"),i=document.querySelector("#container--employees"),a=50;let s=0;function u(){var e,t,n,r;if(0===o.length)return void(i.innerHTML='<div class="message is-info">\n        <p class="message-body">There are no employees that meet your search criteria.</p>\n        </div>');const u=document.createElement("div");u.className="panel";for(let n=s;n<Math.min(a+s,o.length);n+=1){const r=o[n],i=document.createElement("a");i.className="panel-block is-block",i.href="#",i.dataset.employeeNumber=null!==(e=r.employeeNumber)&&void 0!==e?e:"",i.innerHTML=`<div class="columns">\n        <div class="column">${r.employeeNumber}</div>\n        <div class="column">\n          ${r.employeeSurname}, ${r.employeeGivenName}<br />\n          <span class="is-size-7">\n            ${null!==(t=r.jobTitle)&&void 0!==t?t:""}\n          </span>\n        </div>\n        </div>`,i.addEventListener("click",l),u.append(i)}i.innerHTML="",i.append(u);const d=document.createElement("div");d.className="field is-grouped is-justify-content-center",d.innerHTML='<div class="control">\n      <button class="button is-previous-button" data-tooltip="Previous Employees" type="button" aria-label="Previous">\n        <i class="fas fa-arrow-left" aria-hidden="true"></i>\n      </button>\n      <button class="button is-next-button" data-tooltip="Next Employees" type="button" aria-label="Next">\n        <span>Next</span>  \n        <span class="icon is-small"><i class="fas fa-arrow-right" aria-hidden="true"></i></span>\n      </button>\n      </div>',0===s?d.querySelector(".is-previous-button").disabled=!0:null===(n=d.querySelector(".is-previous-button"))||void 0===n||n.addEventListener("click",c),a+s>=o.length?d.querySelector(".is-next-button").disabled=!0:null===(r=d.querySelector(".is-next-button"))||void 0===r||r.addEventListener("click",m),i.append(d)}function c(){s=Math.max(s-a,0),u()}function m(){(s+=a)>=o.length&&(s=0),u()}function d(){o=t.filter(e=>{if("1"===r.value&&!e.isActive||"0"===r.value&&e.isActive)return!1;const t=(e.employeeGivenName+" "+e.employeeSurname+" "+e.employeeNumber).toLowerCase(),o=n.value.trim().toLowerCase().split(" ");for(const e of o)if(!t.includes(e))return!1;return!0}),u()}function p(){s=0,d()}p(),n.addEventListener("keyup",p),r.addEventListener("change",p)})();