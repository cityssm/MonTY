"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=exports.MonTY,n=exports.employees,s=Object.prototype.hasOwnProperty.call(exports,"absenceRecords"),o=Object.prototype.hasOwnProperty.call(exports,"returnToWorkRecords"),a=Object.prototype.hasOwnProperty.call(exports,"callOutLists"),t=Object.prototype.hasOwnProperty.call(exports,"afterHoursRecords"),r=document.querySelector("#employees--searchFilter"),l=document.querySelector("#container--employees");function i(e,n){let s=!1;const o=e.querySelectorAll(".panel-block");for(const e of o)if(e.dataset.recordCreate_timeMillis<n.dataset.recordCreate_timeMillis){e.before(n),s=!0;break}s||e.append(n)}function c(r){let l;const c=n.find(e=>e.employeeNumber===r);cityssm.openHtmlModal("attendance-employee",{onshow(n){l=n,n.querySelector("#container--attendanceLogEmployee").innerHTML=`<div class="columns">\n            <div class="column is-5">\n              <strong>Employee Number</strong><br />\n              ${c.employeeNumber}\n            </div>\n            <div class="column">\n              <strong>Employee Name</strong><br />\n              ${c.employeeSurname}, ${c.employeeGivenName}\n            </div>\n          </div>`,cityssm.postJSON(e.urlPrefix+"/attendance/doGetAttendanceRecords",{employeeNumber:r},e=>{!function(e){var n,s,o,a,t,r;const c=document.createElement("div");c.className="panel";const d=l.querySelector("#container--attendanceLog");for(const s of e.absenceRecords){const e=document.createElement("div");e.className="panel-block is-block",e.dataset.recordCreate_timeMillis=new Date(s.recordCreate_dateTime).getTime().toString(),e.innerHTML=`<div class="columns is-mobile">\n          <div class="column is-narrow has-tooltip-right" data-tooltip="Absence">\n            <i class="fas fa-fw fa-sign-out-alt" aria-label="Absence"></i>\n          </div>\n          <div class="column">\n            <strong>${new Date(s.absenceDateTime).toLocaleDateString()}</strong>\n          </div>\n          <div class="column">\n            <strong>${s.absenceType}</strong><br />\n            <span class="is-size-7">${null!==(n=s.recordComment)&&void 0!==n?n:""}</span>\n          </div>\n          </div>`,c.append(e)}for(const n of e.returnToWorkRecords){const e=document.createElement("div");e.className="panel-block is-block",e.dataset.recordCreate_timeMillis=new Date(n.recordCreate_dateTime).getTime().toString(),e.innerHTML=`<div class="columns is-mobile">\n          <div class="column is-narrow has-tooltip-right" data-tooltip="Return to Work">\n            <i class="fas fa-fw fa-sign-in-alt" aria-label="Return to Work"></i>\n          </div>\n          <div class="column">\n            <strong>${new Date(n.returnDateTime).toLocaleDateString()}</strong><br />\n            ${null!==(s=n.returnShift)&&void 0!==s?s:""}\n          </div>\n          <div class="column">\n            <strong>Return to Work</strong><br />\n            <span class="is-size-7">${null!==(o=n.recordComment)&&void 0!==o?o:""}</span>\n          </div>\n          </div>`,i(c,e)}for(const n of e.callOutRecords){const e=document.createElement("div");e.className="panel-block is-block",e.dataset.recordCreate_timeMillis=new Date(n.recordCreate_dateTime).getTime().toString(),e.innerHTML=`<div class="columns is-mobile">\n          <div class="column is-narrow has-tooltip-right" data-tooltip="Call Out">\n            <i class="fas fa-fw fa-phone" aria-label="Call Out"></i>\n          </div>\n          <div class="column">\n            <strong>${new Date(n.callOutDateTime).toLocaleDateString()}</strong><br />\n            <span class="is-size-7">\n              <i class="fas fa-fw ${null!==(a=n.isSuccessful)&&void 0!==a&&a?" fa-check has-text-success":" fa-times has-text-danger"}" aria-hidden="true"></i>\n              ${null!==(t=n.responseType)&&void 0!==t?t:""}\n            </span>\n          </div>\n          <div class="column">\n            <strong>Call Out</strong><br />\n            <span class="is-size-7">${null!==(r=n.recordComment)&&void 0!==r?r:""}</span>\n          </div>\n          </div>`,i(c,e)}c.hasChildNodes()?(d.innerHTML="",d.append(c)):d.innerHTML=`<div class="message is-info">\n          <p class="message-body">There are no attendance records in the past ${exports.recentDays} days.</p>\n          </div>`}(e)})},onshown(n){bulmaJS.toggleHtmlClipped(),e.initializeMenuTabs(n.querySelectorAll(".menu a"),n.querySelectorAll("article"));const l=n.querySelector("#tab--attendanceReports .panel");s&&(null==l||l.insertAdjacentHTML("beforeend",`<a class="panel-block" href="${e.urlPrefix}/reports/absenceRecords-recent-byEmployeeNumber/?employeeNumber=${r}" download>\n              <div class="columns is-mobile">\n                <div class="column is-narrow">\n                  <i class="fas fa-2x fa-file" aria-hidden="true"></i>\n                </div>\n                <div class="column">\n                Recent Absence Records\n                </div>\n              </div>\n            </a>`)),o&&(null==l||l.insertAdjacentHTML("beforeend",`<a class="panel-block" href="${e.urlPrefix}/reports/returnToWorkRecords-recent-byEmployeeNumber/?employeeNumber=${r}" download>\n              <div class="columns is-mobile">\n                <div class="column is-narrow">\n                  <i class="fas fa-2x fa-file" aria-hidden="true"></i>\n                </div>\n                <div class="column">\n                Recent Return to Work Records\n                </div>\n              </div>\n            </a>`)),a&&(null==l||l.insertAdjacentHTML("beforeend",`<a class="panel-block" href="${e.urlPrefix}/reports/callOutRecords-recent-byEmployeeNumber/?employeeNumber=${r}" download>\n              <div class="columns is-mobile">\n                <div class="column is-narrow">\n                  <i class="fas fa-2x fa-file" aria-hidden="true"></i>\n                </div>\n                <div class="column">\n                Recent Call Out Records\n                </div>\n              </div>\n            </a>`)),t&&(null==l||l.insertAdjacentHTML("beforeend",`<a class="panel-block" href="${e.urlPrefix}/reports/afterHoursRecords-recent-byEmployeeNumber/?employeeNumber=${r}" download>\n              <div class="columns is-mobile">\n                <div class="column is-narrow">\n                  <i class="fas fa-2x fa-file" aria-hidden="true"></i>\n                </div>\n                <div class="column">\n                Recent After Hours Records\n                </div>\n              </div>\n            </a>`))},onremoved(){bulmaJS.toggleHtmlClipped()}})}function d(e){e.preventDefault(),c(e.currentTarget.dataset.employeeNumber)}function m(){var e;if(0===n.length)return void(l.innerHTML='<div class="message is-warning">\n        <p class="message-body">There are no active employees to report.</p>\n        </div>');const s=r.value.trim().toLowerCase().split(" "),o=document.createElement("div");o.className="panel";for(const a of n){const n=(a.employeeNumber+" "+a.employeeGivenName+" "+a.employeeSurname).toLowerCase();let t=!0;for(const e of s)if(!n.includes(e)){t=!1;break}if(!t)continue;const r=document.createElement("a");r.className="panel-block is-block",r.dataset.employeeNumber=a.employeeNumber,r.href="#",r.innerHTML=`<div class="columns is-mobile">\n        <div class="column is-narrow">\n          <i class="fas fa-hard-hat" aria-hidden="true"></i>\n        </div>\n        <div class="column is-4">\n          <strong>${a.employeeNumber}</strong>\n        </div>\n        <div class="column">\n          <strong>${a.employeeSurname}, ${a.employeeGivenName}</strong><br />\n          <span class="is-size-7">${null!==(e=a.jobTitle)&&void 0!==e?e:""}</span>\n        </div>\n        </div>`,r.addEventListener("click",d),o.append(r)}o.hasChildNodes()?(l.innerHTML="",l.append(o)):l.innerHTML='<div class="message is-info">\n        <p class="message-body">There are no active employees that meet the search criteria.</p>\n        </div>'}m(),r.addEventListener("keyup",m)})();