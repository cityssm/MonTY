"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{var e;const t=exports.MonTY;let s=exports.callOutLists;delete exports.callOutLists;exports.callOutsCanUpdate;const l=exports.callOutsCanManage,n=document.querySelector("#callOuts--searchFilter"),a=document.querySelector("#callOuts--searchResults");function i(){var e,t;const l=document.createElement("div");l.className="panel";const i=n.value.trim().toLowerCase().split(" ");for(const n of s){let s=!0;const a=(n.listName+" "+(null!==(e=n.listDescription)&&void 0!==e?e:"")).toLowerCase();for(const e of i)if(!a.includes(e)){s=!1;break}if(!s)continue;const r=document.createElement("a");r.className="panel-block",r.dataset.listId=n.listId.toString(),r.href="#",r.innerHTML=`<span class="panel-icon">\n        <i class="fas fa-list-ol" aria-hidden="true"></i>\n        </span>\n        <div>\n          <strong>${n.listName}</strong><br />\n          <span class="is-size-7">${null!==(t=n.listDescription)&&void 0!==t?t:""}</span>\n        </div>`,r.addEventListener("click",o),l.append(r)}l.hasChildNodes()?(a.innerHTML="",a.append(l)):a.innerHTML='<div class="message is-info">\n        <p class="message-body">There are no call out lists that meet your search criteria.</p>\n        </div>'}function o(e){e.preventDefault(),function(e){const t=s.find(t=>t.listId===e);cityssm.openHtmlModal("callOuts-list",{onshow(e){var s,n;e.querySelector(".modal-card-title").textContent=t.listName,l&&(null===(n=null===(s=e.querySelector(".menu a[href$='tab--callOuts-memberManagement']"))||void 0===s?void 0:s.closest("li"))||void 0===n||n.classList.remove("is-hidden"))}})}(e.currentTarget.dataset.listId)}null===(e=document.querySelector("#callOuts--create"))||void 0===e||e.addEventListener("click",()=>{let e;function l(l){l.preventDefault(),cityssm.postJSON(t.urlPrefix+"/attendance/doCreateCallOutList",l.currentTarget,t=>{s=t.callOutLists,i(),e()})}cityssm.openHtmlModal("callOuts-createList",{onshown(t,s){var n;e=s,null===(n=t.querySelector("#form--callOutListAdd"))||void 0===n||n.addEventListener("submit",l)}})}),i(),n.addEventListener("keyup",i)})();