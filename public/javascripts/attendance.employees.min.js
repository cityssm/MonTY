"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=exports.MonTY,n=exports.employees,s=document.querySelector("#employees--searchFilter"),t=document.querySelector("#container--employees");function a(e,n){let s=!1;const t=e.querySelectorAll(".panel-block");for(const e of t)if(e.dataset.recordCreate_timeMillis<n.dataset.recordCreate_timeMillis){e.before(n),s=!0;break}s||e.append(n)}function o(s){let t;s.preventDefault();const o=s.currentTarget.dataset.employeeNumber,r=n.find(e=>e.employeeNumber===o);cityssm.openHtmlModal("attendance-employee",{onshow(n){t=n,n.querySelector("#container--attendanceLogEmployee").innerHTML=`<div class="columns">\n            <div class="column is-5">\n              <strong>Employee Number</strong><br />\n              ${r.employeeNumber}\n            </div>\n            <div class="column">\n              <strong>Employee Name</strong><br />\n              ${r.employeeSurname}, ${r.employeeGivenName}\n            </div>\n          </div>`,cityssm.postJSON(e.urlPrefix+"/attendance/doGetAttendanceRecords",{employeeNumber:o},e=>{!function(e){var n,s,o,r,i,l;const c=document.createElement("div");c.className="panel";const d=t.querySelector("#container--attendanceLog");for(const s of e.absenceRecords){const e=document.createElement("div");e.className="panel-block is-block",e.dataset.recordCreate_timeMillis=new Date(s.recordCreate_dateTime).getTime().toString(),e.innerHTML=`<div class="columns">\n          <div class="column is-narrow has-tooltip-right" data-tooltip="Absence">\n            <i class="fas fa-fw fa-sign-out-alt" aria-label="Absence"></i>\n          </div>\n          <div class="column">\n            <strong>${new Date(s.absenceDateTime).toLocaleDateString()}</strong>\n          </div>\n          <div class="column">\n            <strong>${s.absenceType}</strong><br />\n            <span class="is-size-7">${null!==(n=s.recordComment)&&void 0!==n?n:""}</span>\n          </div>\n          </div>`,c.append(e)}for(const n of e.returnToWorkRecords){const e=document.createElement("div");e.className="panel-block is-block",e.dataset.recordCreate_timeMillis=new Date(n.recordCreate_dateTime).getTime().toString(),e.innerHTML=`<div class="columns">\n          <div class="column is-narrow has-tooltip-right" data-tooltip="Return to Work">\n            <i class="fas fa-fw fa-sign-in-alt" aria-label="Return to Work"></i>\n          </div>\n          <div class="column">\n            <strong>${new Date(n.returnDateTime).toLocaleDateString()}</strong><br />\n            ${null!==(s=n.returnShift)&&void 0!==s?s:""}\n          </div>\n          <div class="column">\n            <strong>Return to Work</strong><br />\n            <span class="is-size-7">${null!==(o=n.recordComment)&&void 0!==o?o:""}</span>\n          </div>\n          </div>`,a(c,e)}for(const n of e.callOutRecords){const e=document.createElement("div");e.className="panel-block is-block",e.dataset.recordCreate_timeMillis=new Date(n.recordCreate_dateTime).getTime().toString(),e.innerHTML=`<div class="columns">\n          <div class="column is-narrow has-tooltip-right" data-tooltip="Call Out">\n            <i class="fas fa-fw fa-phone" aria-label="Call Out"></i>\n          </div>\n          <div class="column">\n            <strong>${new Date(n.callOutDateTime).toLocaleDateString()}</strong><br />\n            <span class="is-size-7">\n              <i class="fas fa-fw ${null!==(r=n.isSuccessful)&&void 0!==r&&r?" fa-check has-text-success":" fa-times has-text-danger"}" aria-hidden="true"></i>\n              ${null!==(i=n.responseType)&&void 0!==i?i:""}\n            </span>\n          </div>\n          <div class="column">\n            <strong>Call Out</strong><br />\n            <span class="is-size-7">${null!==(l=n.recordComment)&&void 0!==l?l:""}</span>\n          </div>\n          </div>`,a(c,e)}c.hasChildNodes()?(d.innerHTML="",d.append(c)):d.innerHTML=`<div class="message is-info">\n          <p class="message-body">There are no attendance records in the past ${exports.recentDays} days.</p>\n          </div>`}(e)})}})}function r(){var e;if(0===n.length)return void(t.innerHTML='<div class="message is-warning">\n        <p class="message-body">There are no active employees to report.</p>\n        </div>');const a=s.value.trim().toLowerCase().split(" "),r=document.createElement("div");r.className="panel";for(const s of n){const n=(s.employeeNumber+" "+s.employeeGivenName+" "+s.employeeSurname).toLowerCase();let t=!0;for(const e of a)if(!n.includes(e)){t=!1;break}if(!t)continue;const i=document.createElement("a");i.className="panel-block is-block",i.dataset.employeeNumber=s.employeeNumber,i.href="#",i.innerHTML=`<div class="columns">\n        <div class="column">\n          <strong>${s.employeeNumber}</strong>\n        </div>\n        <div class="column">\n          <strong>${s.employeeSurname}, ${s.employeeGivenName}</strong><br />\n          <span class="is-size-7">${null!==(e=s.jobTitle)&&void 0!==e?e:""}</span>\n        </div>\n        </div>`,i.addEventListener("click",o),r.append(i)}r.hasChildNodes()?(t.innerHTML="",t.append(r)):t.innerHTML='<div class="message is-info">\n        <p class="message-body">There are no active employees that meet the search criteria.</p>\n        </div>'}r(),s.addEventListener("keyup",r)})();