"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{var e,t;const s=exports.MonTY;function n(e){e.currentTarget.closest("tr").classList.add("has-background-warning-light")}let a=exports.absenceTypes;function o(e){const t=e.currentTarget.closest("tr"),n=t.dataset.absenceTypeKey,a=t.querySelector("input").value;cityssm.postJSON(s.urlPrefix+"/admin/doUpdateAbsenceType",{absenceTypeKey:n,absenceType:a},e=>{e.success&&(bulmaJS.alert({message:"Absence type updated successfully."}),t.classList.remove("has-background-warning-light"))})}function l(e){const t=e.currentTarget,n=t.closest("tr").dataset.absenceTypeKey;cityssm.postJSON(s.urlPrefix+"/admin/"+("up"===t.dataset.direction?"doMoveAbsenceTypeUp":"doMoveAbsenceTypeDown"),{absenceTypeKey:n,moveToEnd:e.shiftKey?"1":"0"},e=>{var t;const s=e;s.success?(a=s.absenceTypes,c()):bulmaJS.alert({title:"Error Moving Absence Type",message:null!==(t=s.errorMessage)&&void 0!==t?t:"",contextualColorName:"danger"})})}function r(e){const t=e.currentTarget.closest("tr").dataset.absenceTypeKey;bulmaJS.confirm({title:"Delete Absence Type",message:"Are you sure you want to delete this absence type?",contextualColorName:"warning",okButton:{text:"Yes, Delete Absence Type",callbackFunction:function(){cityssm.postJSON(s.urlPrefix+"/admin/doDeleteAbsenceType",{absenceTypeKey:t},e=>{var t;const s=e;s.success?(a=s.absenceTypes,c()):bulmaJS.alert({title:"Error Deleting Absence Type",message:null!==(t=s.errorMessage)&&void 0!==t?t:"",contextualColorName:"danger"})})}}})}function c(){var e,t;const s=document.querySelector("#container--absenceTypes");if(0===a.length)return void(s.innerHTML='<div class="message is-warning">\n        <p class="message-body">There are no active absence types.</p>\n        </div>');s.innerHTML='<table class="table is-striped is-hoverable is-fullwidth">\n      <thead>\n        <tr>\n          <th>Absence Type</th>\n          <th class="has-width-1">\n            <span class="is-sr-only">Update Absence Type</span>\n          </th>\n          <th class="has-width-1">\n            <span class="is-sr-only">Move Absence Type</span>\n          </th>\n          <th class="has-width-1">\n            <span class="is-sr-only">Delete Absence Type</span>\n          </th>\n        </tr>\n      </thead>\n      <tbody></tbody>\n      </table>';const c=s.querySelector("tbody");for(const s of a){const a=document.createElement("tr");a.dataset.absenceTypeKey=s.absenceTypeKey,a.innerHTML='<td>\n        <input class="input" name="absenceType" maxlength="100" required />\n        </td>\n        <td>\n          <button class="button is-success is-update-button" type="button" aria-label="Update Absence Type">\n            <i class="fas fa-save" aria-hidden="true"></i>\n          </button>\n        </td>\n        <td>\n          <div class="field has-addons">\n            <div class="control">\n              <button class="button is-up-button" data-direction="up" type="button" aria-label="Move Up">\n                <i class="fas fa-arrow-up" aria-hidden="true"></i>\n              </button>\n            </div>\n            <div class="control">\n              <button class="button is-down-button" data-direction="down" type="button" aria-label="Move Down">\n                <i class="fas fa-arrow-down" aria-hidden="true"></i>\n              </button>\n            </div>\n          </div>\n        </td>\n        <td>\n        <button class="button is-danger is-delete-button" type="button" aria-label="Delete Absence Type">\n          <i class="fas fa-trash" aria-hidden="true"></i>\n        </button>\n        </td>';const i=a.querySelector("input");i.value=s.absenceType,i.addEventListener("change",n),null===(e=a.querySelector(".is-update-button"))||void 0===e||e.addEventListener("click",o),a.querySelector(".is-up-button").addEventListener("click",l),a.querySelector(".is-down-button").addEventListener("click",l),null===(t=a.querySelector(".is-delete-button"))||void 0===t||t.addEventListener("click",r),c.append(a)}}delete exports.absenceTypes,null===(e=document.querySelector("#tab--absenceTypes .is-add-button"))||void 0===e||e.addEventListener("click",()=>{let e;function t(t){t.preventDefault(),cityssm.postJSON(s.urlPrefix+"/admin/doAddAbsenceType",t.currentTarget,t=>{var s;const n=t;n.success?(e(),bulmaJS.alert({message:"Absence type added successfully.",contextualColorName:"success"}),a=n.absenceTypes,c()):bulmaJS.alert({title:"Error Adding Absence Type",message:null!==(s=n.errorMessage)&&void 0!==s?s:"",contextualColorName:"danger"})})}cityssm.openHtmlModal("tableAdmin-addAbsenceType",{onshown(s,n){var a;bulmaJS.toggleHtmlClipped(),e=n,null===(a=s.querySelector("form"))||void 0===a||a.addEventListener("submit",t)},onremoved(){bulmaJS.toggleHtmlClipped()}})}),c();let i=exports.callOutResponseTypes;function d(e){const t=e.currentTarget.closest("tr"),n=t.dataset.responseTypeId,a=t.querySelector("input").value,o=t.querySelector("select").value;cityssm.postJSON(s.urlPrefix+"/admin/doUpdateCallOutResponseType",{responseTypeId:n,responseType:a,isSuccessful:o},e=>{e.success&&(bulmaJS.alert({message:"Response type updated successfully."}),t.classList.remove("has-background-warning-light"))})}function u(e){const t=e.currentTarget,n=t.closest("tr").dataset.responseTypeId;cityssm.postJSON(s.urlPrefix+"/admin/"+("up"===t.dataset.direction?"doMoveCallOutResponseTypeUp":"doMoveCallOutResponseTypeDown"),{responseTypeId:n,moveToEnd:e.shiftKey?"1":"0"},e=>{var t;const s=e;s.success?(i=s.callOutResponseTypes,y()):bulmaJS.alert({title:"Error Moving Response Type",message:null!==(t=s.errorMessage)&&void 0!==t?t:"",contextualColorName:"danger"})})}function p(e){const t=e.currentTarget.closest("tr").dataset.responseTypeId;bulmaJS.confirm({title:"Delete Response Type",message:"Are you sure you want to delete this response type?",contextualColorName:"warning",okButton:{text:"Yes, Delete Response Type",callbackFunction:function(){cityssm.postJSON(s.urlPrefix+"/admin/doDeleteCallOutResponseType",{responseTypeId:t},e=>{var t;const s=e;s.success?(i=s.callOutResponseTypes,y()):bulmaJS.alert({title:"Error Deleting Response Type",message:null!==(t=s.errorMessage)&&void 0!==t?t:"",contextualColorName:"danger"})})}}})}function y(){var e,t,s;const o=document.querySelector("#container--callOutResponseTypes");if(0===a.length)return void(o.innerHTML='<div class="message is-warning">\n        <p class="message-body">There are no active response types.</p>\n        </div>');o.innerHTML='<table class="table is-striped is-hoverable is-fullwidth">\n      <thead>\n        <tr>\n          <th>Response Type</th>\n          <th>Is Successful</th>\n          <th class="has-width-1">\n            <span class="is-sr-only">Update Response Type</span>\n          </th>\n          <th class="has-width-1">\n            <span class="is-sr-only">Move Response Type</span>\n          </th>\n          <th class="has-width-1">\n            <span class="is-sr-only">Delete Response Type</span>\n          </th>\n        </tr>\n      </thead>\n      <tbody></tbody>\n      </table>';const l=o.querySelector("tbody");for(const a of i){const o=document.createElement("tr");o.dataset.responseTypeId=a.responseTypeId.toString(),o.innerHTML='<td>\n        <input class="input" name="responseType" maxlength="100" required />\n        </td>\n        <td>\n          <div class="select is-fullwidth">\n            <select name="isSuccessful" required>\n              <option value="1">Successful</option>\n              <option value="0">Unsuccessful</option>\n            </select>\n          </div>\n        </td>\n        <td>\n          <button class="button is-success is-update-button" type="button" aria-label="Update Response Type">\n            <i class="fas fa-save" aria-hidden="true"></i>\n          </button>\n        </td>\n        <td>\n          <div class="field has-addons">\n            <div class="control">\n              <button class="button is-up-button" data-direction="up" type="button" aria-label="Move Up">\n                <i class="fas fa-arrow-up" aria-hidden="true"></i>\n              </button>\n            </div>\n            <div class="control">\n              <button class="button is-down-button" data-direction="down" type="button" aria-label="Move Down">\n                <i class="fas fa-arrow-down" aria-hidden="true"></i>\n              </button>\n            </div>\n          </div>\n        </td>\n        <td>\n        <button class="button is-danger is-delete-button" type="button" aria-label="Delete Response Type">\n          <i class="fas fa-trash" aria-hidden="true"></i>\n        </button>\n        </td>';const r=o.querySelector("input");r.value=a.responseType,r.addEventListener("change",n),null===(e=o.querySelector("select"))||void 0===e||e.addEventListener("change",n),a.isSuccessful||(o.querySelector("select").value="0"),null===(t=o.querySelector(".is-update-button"))||void 0===t||t.addEventListener("click",d),o.querySelector(".is-up-button").addEventListener("click",u),o.querySelector(".is-down-button").addEventListener("click",u),null===(s=o.querySelector(".is-delete-button"))||void 0===s||s.addEventListener("click",p),l.append(o)}}delete exports.callOutResponseTypes,null===(t=document.querySelector("#tab--callOutResponseTypes .is-add-button"))||void 0===t||t.addEventListener("click",()=>{let e;function t(t){t.preventDefault(),cityssm.postJSON(s.urlPrefix+"/admin/doAddCallOutResponseType",t.currentTarget,t=>{var s;const n=t;n.success?(e(),bulmaJS.alert({message:"Response type added successfully.",contextualColorName:"success"}),i=n.callOutResponseTypes,y()):bulmaJS.alert({title:"Error Adding Response Type",message:null!==(s=n.errorMessage)&&void 0!==s?s:"",contextualColorName:"danger"})})}cityssm.openHtmlModal("tableAdmin-addCallOutResponseType",{onshown(s,n){var a;bulmaJS.toggleHtmlClipped(),e=n,null===(a=s.querySelector("form"))||void 0===a||a.addEventListener("submit",t)},onremoved(){bulmaJS.toggleHtmlClipped()}})}),y()})();